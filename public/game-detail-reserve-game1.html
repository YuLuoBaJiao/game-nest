<!-- æ–‡ä»¶åï¼šgame-detail-reserve-game1.html -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æ³¡å§†æ³¡å§† - æ¸¸æˆè¯¦æƒ…</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="shouye.css">
    <style>
        /* ä¿®å¤å¯¼èˆªæ é®æŒ¡é—®é¢˜ */
        body {
        padding-top: 95px; /* æ ¹æ®å®é™…å¯¼èˆªæ é«˜åº¦è°ƒæ•´ */
        }

        header {
            position: fixed;
            top: 0;
            width: 100%;
            height: 75px; /* è°ƒæ•´å¯¼èˆªæ å®é™…é«˜åº¦ */
            z-index: 1000;
            background: black;
            padding: 5px 0;
        }
        /* æ–°å¢è¯¦æƒ…é¡µæ ·å¼ */
        .game-detail-container {
            max-width: 75%;
            margin: 30px auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }

        .game-cover {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .game-description {
            color: #333;
            line-height: 1.8;
            margin-bottom: 40px;
        }

        .comments-section {
            border-top: 2px solid #eee;
            padding-top: 30px;
        }

        #commentForm {
            margin-bottom: 30px;
            width: 93%;
        }

        #commentInput {
            width: 100%;
            height: 100px;
            padding: 15px;
            margin-bottom: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            resize: vertical;
        }

        .comment-list {
            background: #f8f9fa;
            padding: 20px;
            margin-top: 50px;
            border-radius: 8px;
            width: 93%;
        }

        .comment-item {
            padding: 15px;
            margin-bottom: 15px;
            background: white;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .comment-author {
            color: #ff4500;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .comment-content {
            color: #666;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ ï¼ˆä¸library.htmlä¿æŒä¸€è‡´ï¼‰ -->
    <header>
        <div class="logo"><img src="img/logo.png" height="49" width="156"/></div>
        <div class="topbq">
            <ul>
                <li><a href="shouye.html" class="top-bq">é¢„çº¦</a></li>
                <li><a href="ceshi.html" class="top-bq">è®¢é˜…</a></li>
                <li><a href="library.html" class="top-bq" style="color: orange">æˆ‘çš„æ¸¸æˆåº“</a></li>
                <li><a href="#" class="top-bq">ç¤¾åŒº</a></li>
                <li class="dropdown-container">
                  <a href="#" class="top-bq">æ›´å¤š â–¼</a>
                  <div class="dropdown-menu">
                      <div class="dropdown-item" onclick="showNotifications()">ğŸ“© é€šçŸ¥</div>
                      <div class="dropdown-item" onclick="showSettings()">âš™ï¸ è®¾ç½®</div>
                      <div class="dev-item" onclick="checkDeveloperAccess(event)">ğŸ’» å¼€å‘è€…ä¸­å¿ƒ</div>
                  </div>
              </li>
            </ul>
        </div>
        <div class="search-bar">
            <input type="text" placeholder="æœç´¢..." style="height: 30px;width: 350px;border-top-left-radius: 15px;border-bottom-left-radius: 15px;border: none;background: whitesmoke">
            <button style="margin-left:-10px;height: 40px;width: 60px;border-bottom-right-radius:15px;border-top-right-radius:15px;border: none;background: whitesmoke;color: black ">æœç´¢</button>
        </div>
        <div class="login">
            <button style="background: darkorange;border-radius: 25px;height: 40px;width: 90px;border: none;color: white;margin-right:30px" 
                    onclick="location.href='index.html'">é€€å‡º</button>
        </div>
    </header>

    <div class="game-detail-container">
        <!-- æ¸¸æˆå°é¢ -->
        <img src="img/yuyue1.png" class="game-cover" alt="æ³¡å§†æ³¡å§†æ¸¸æˆå°é¢">

        <!-- æ¸¸æˆç®€ä»‹ -->
        <div class="game-description">
            <h2 style="color: #ff4500; margin-bottom: 15px;">æ³¡å§†æ³¡å§†</h2>
            <p>ã€Šæ³¡å§†æ³¡å§†ã€‹æ˜¯ä¸€æ¬¾å……æ»¡æ¬¢ä¹çš„å¤šäººåˆä½œæ´¾å¯¹æ¸¸æˆï¼åœ¨è‰²å½©ç¼¤çº·çš„æ³¡æ³¡ä¸–ç•Œä¸­ï¼Œç©å®¶éœ€è¦ä¸é˜Ÿå‹ç´§å¯†é…åˆï¼Œé€šè¿‡å‘å°„ä¸åŒé¢œè‰²çš„æ³¡æ³¡æ¥æ¶ˆé™¤éšœç¢ã€è§£å¼€å…³å¡è°œé¢˜ã€‚æ¸¸æˆæ”¯æŒ2-4äººè”æœºæ¸¸ç©ï¼ŒåŒ…å«å¤šç§æ¸¸æˆæ¨¡å¼ï¼š</p>
            <ul style="margin: 15px 0; padding-left: 20px;">
                <li>ğŸ® æ•…äº‹æ¨¡å¼ï¼šæ¢ç´¢10ä¸ªé£æ ¼è¿¥å¼‚çš„ä¸»é¢˜ä¸–ç•Œ</li>
                <li>ğŸ† ç«æŠ€æ¨¡å¼ï¼šä¸å…¶ä»–ç©å®¶æ¯”æ‹¼æ¶ˆé™¤é€Ÿåº¦</li>
                <li>ğŸ‰ æ´¾å¯¹æ¨¡å¼ï¼šåŒ…å«20+ç§è¿·ä½ æ¸¸æˆ</li>
            </ul>
            <p>æ¸¸æˆé¢„è®¡2025å¹´ç¬¬ä¸‰å­£åº¦å‘å”®ï¼Œç°å·²å¼€æ”¾é¢„çº¦ï¼</p>
        </div>

        <!-- è¯„è®ºåŒº -->
        <div class="comments-section">
            <h3 style="color: #333; margin-bottom: 20px;">ç©å®¶è®¨è®ºï¼ˆ<span id="commentCount">0</span> æ¡ï¼‰</h3>
            
            <!-- è¯„è®ºè¡¨å• -->
            <form id="commentForm">
                <textarea 
                    id="commentInput" 
                    placeholder="ç•™ä¸‹ä½ çš„æœŸå¾…å’Œæƒ³æ³•å§ï½ï¼ˆæœ€å¤š200å­—ï¼‰"
                    maxlength="200"
                ></textarea>
                <button 
                    type="submit"
                    style="
                        background: darkorange;
                        color: white;
                        padding: 10px 30px;
                        border: none;
                        border-radius: 25px;
                        cursor: pointer;
                        float: right;
                    ">
                    å‘è¡¨è¯„è®º
                </button>
            </form>

            <!-- è¯„è®ºåˆ—è¡¨ -->
            <div class="comment-list" id="commentList">
                <!-- è¯„è®ºå°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </div>
        </div>
    </div>

    <script>
        // è¯„è®ºåŠ è½½å’Œæäº¤åŠŸèƒ½
        const COMMENTS_KEY = 'game1-comments-reserve';

        // åŠ è½½è¯„è®º
        function loadComments() {
            const comments = JSON.parse(localStorage.getItem(COMMENTS_KEY)) || [];
            const commentList = document.getElementById('commentList');
            const commentCount = document.getElementById('commentCount');
            
            commentList.innerHTML = '';
            commentCount.textContent = comments.length;

            comments.forEach(comment => {
                const commentItem = document.createElement('div');
                commentItem.className = 'comment-item';
                commentItem.innerHTML = `
                    <div class="comment-author">${comment.author}</div>
                    <div class="comment-content">${comment.content}</div>
                    <div style="color: #999; font-size: 0.9em; margin-top: 5px;">
                        ${new Date(comment.timestamp).toLocaleString()}
                    </div>
                `;
                commentList.appendChild(commentItem);
            });
        }

        // æäº¤è¯„è®º
        document.getElementById('commentForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const commentInput = document.getElementById('commentInput');
            const content = commentInput.value.trim();
            
            if (!content) {
                alert('è¯„è®ºå†…å®¹ä¸èƒ½ä¸ºç©º');
                return;
            }

            // è·å–å½“å‰ç”¨æˆ·ï¼ˆéœ€è¦å…ˆç™»å½•ï¼‰
            const user = await fetch('/api/user', {
                headers: {
                    'Authorization': `Bearer ${localStorage.getItem('authToken')}`
                }
            }).then(res => res.json());

            const newComment = {
                author: user.username,
                content,
                timestamp: Date.now()
            };

            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            const comments = JSON.parse(localStorage.getItem(COMMENTS_KEY)) || [];
            comments.unshift(newComment);
            localStorage.setItem(COMMENTS_KEY, JSON.stringify(comments));

            // æ¸…ç©ºè¾“å…¥æ¡†
            commentInput.value = '';
            loadComments();
        });

        // åˆå§‹åŒ–åŠ è½½è¯„è®º
        loadComments();
    </script>
</body>
</html>